# 요구사항 명세서 (Requirements Specification)

## 1. 개요 (Overview)
본 문서는 다양한 기술 블로그(기업 및 개인)의 RSS 피드를 수집하여 중앙 데이터베이스에 저장하고, 생성형 AI를 활용하여 기사에 적절한 태그를 자동으로 부여하는 **Techmoa 기술 블로그 수집기**의 요구사항을 정의한다. 이 시스템은 주기적으로 실행되어 최신 기술 아티클을 수집, 정제, 저장하는 백엔드 프로세스로 동작한다.

## 2. 요구사항 목록 (Requirements List)

### RQ-INS-001: 기술 블로그 RSS 피드 수집
| 항목 | 내용 |
| :--- | :--- |
| **요구사항 ID** | RQ-INS-001 |
| **요구사항 명** | 다중 소스 RSS 피드 파싱 |
| **상세 설명** | 시스템은 설정된 여러 기술 블로그(기업 및 개인)의 RSS/Atom 피드 URL을 접속하여 최신 게시글 정보를 파싱해야 한다. 기업 블로그, 개인 블로그(FE, BE, AI, App 등 카테고리별) 등 다양한 소스를 지원해야 한다. |
| **활용 라이브러리** | `feedparser`, `requests` |
| **오픈소스** | 없음 (Standard RSS Parsing) |

### RQ-INS-002: 중복 데이터 방지
| 항목 | 내용 |
| :--- | :--- |
| **요구사항 ID** | RQ-INS-002 |
| **요구사항 명** | URL 및 메타데이터 기반 중복 검사 |
| **상세 설명** | 시스템은 새로운 기사를 저장하기 전에 이미 데이터베이스에 존재하는지 확인해야 한다. <br> 1. 정규화된 URL(`Normalied URL`) 비교 <br> 2. `Author`와 `Title`의 조합 키(`Author:Title`) 비교 <br> 위 두 가지 조건 중 하나라도 일치하면 중복으로 간주하고 저장을 건너뛰어야 한다. |
| **활용 라이브러리** | 없음 (Custom Logic) |
| **오픈소스** | 없음 |

### RQ-INS-003: AI 기반 태그 자동 생성
| 항목 | 내용 |
| :--- | :--- |
| **요구사항 ID** | RQ-INS-003 |
| **요구사항 명** | Gemini API를 활용한 키워드 추출 |
| **상세 설명** | 시스템은 기사의 제목(Title), 요약(Summary), 작성자(Author) 정보를 바탕으로 해당 기사의 핵심 주제를 나타내는 태그를 3~6개 생성해야 한다. <br> - Google Gemini Pro/Flash 모델을 사용한다. <br> - 사전에 정의된 `ALLOWED_TAGS` 목록(Frontend, Backend, AI 등) 내에서 태그를 선정해야 한다. <br> - API 호출 실패 시 빈 리스트를 반환하거나 재시도 로직(선택적)을 수행한다. |
| **활용 라이브러리** | `google-generativeai` |
| **오픈소스** | Gemini API (`gemini-1.5-flash`) |

### RQ-INS-004: 데이터 저장 및 관리
| 항목 | 내용 |
| :--- | :--- |
| **요구사항 ID** | RQ-INS-004 |
| **요구사항 명** | Supabase 데이터베이스 연동 |
| **상세 설명** | 수집 및 가공된 기사 데이터는 Supabase 데이터베이스의 `blogs` 테이블에 저장되어야 한다. 저장되는 정보는 제목, 요약, 작성자, 외부 링크, 발행일, 썸네일 URL, 블로그 타입, 카테고리, 태그 등을 포함한다. Bulk Insert 방식을 사용하여 효율적으로 데이터를 적재해야 한다. |
| **활용 라이브러리** | `supabase` |
| **오픈소스** | Supabase (PostgreSQL based) |

### RQ-INS-005: 썸네일 이미지 추출
| 항목 | 내용 |
| :--- | :--- |
| **요구사항 ID** | RQ-INS-005 |
| **요구사항 명** | RSS Enclosure 및 OG 태그 기반 이미지 추출 |
| **상세 설명** | RSS 피드에 이미지가 포함되지 않은 경우, 원본 URL을 크롤링하여 대표 이미지를 추출해야 한다. 다음 순서로 이미지를 탐색한다: <br> 1. 웹 스크래핑 (Open Graph `og:image`, Twitter Card `twitter:image`) <br> 2. RSS Enclosure 태그 <br> 3. RSS Media Content/Thumbnail <br> 4. 본문(`content`/`description`) 내 `<img>` 태그 파싱 |
| **활용 라이브러리** | `beautifulsoup4`, `lxml`, `requests` |
| **오픈소스** | 없음 |

### RQ-INS-006: 데이터 정규화 및 정제
| 항목 | 내용 |
| :--- | :--- |
| **요구사항 ID** | RQ-INS-006 |
| **요구사항 명** | URL 및 텍스트 데이터 정제 |
| **상세 설명** | - **URL 정규화**: UTM 파라미터 등 불필요한 트래킹 쿼리 스트링을 제거하여 순수한 Article URL로 변환한다. <br> - **제목 정규화**: 불필요한 공백을 제거하고 표준화한다. <br> - **요약 생성**: HTML 태그를 제거(Strip HTML)하고, 본문 내용을 기반으로 일정 길이(예: 200자)로 요약문을 생성한다. |
| **활용 라이브러리** | `urllib.parse`, `re`, `beautifulsoup4` |
| **오픈소스** | 없음 |

### RQ-INS-007: 환경 설정 및 보안
| 항목 | 내용 |
| :--- | :--- |
| **요구사항 ID** | RQ-INS-007 |
| **요구사항 명** | 환경 변수 기반 설정 관리 |
| **상세 설명** | 데이터베이스 접속 정보(URL, Key), AI API Key 등 민감 정보와 크롤링 대상 RSS 목록 등은 소스 코드가 아닌 환경 변수(`.env`) 또는 별도의 설정 파일(`config.py`)을 통해 관리되어야 한다. |
| **활용 라이브러리** | `python-dotenv`, `os` |
| **오픈소스** | 없음 |
